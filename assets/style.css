/*
    style.css
    ---
    1. Fonts & Resets
    2. Root Variables (Design Tokens)
    3. Base & Document Styles
    4. Layout Systems
    5. Typography
    6. Component Styles
    7. Utility Classes
    8. Responsive Styles
*/

/* 1. FONTS & RESETS */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Source+Serif+4:wght@400;700&display=swap');

*, *::before, *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

/* 2. ROOT VARIABLES (DESIGN TOKENS) */
:root {
    /* Color Palette (Dark Theme by default) */
    --c-surface-0: #111314;
    --c-surface-1: #1A1D1E;
    --c-surface-2: #25282A;
    --c-text-1: #E1E3E4;
    --c-text-2: #8C9196;
    --c-border: #303436;
    --c-accent: #22D3EE; /* Cyan */
    --c-accent-visited: #A855F7; /* Purple */
    --c-success: #22C55E; /* Green */
    --c-warn: #F59E0B; /* Amber */
    --c-danger: #EF4444; /* Red */
    --c-overlay-backdrop: rgba(17, 19, 20, 0.8);

    /* Typography */
    --font-ui: 'Inter', -apple-system, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    --font-body: 'Source Serif 4', Georgia, 'Times New Roman', Times, serif;
    
    /* Spacing (8pt scale) */
    --space-1: 4px;  --space-2: 8px;   --space-3: 12px; --space-4: 16px;
    --space-5: 24px; --space-6: 32px;  --space-7: 48px; --space-8: 64px;

    /* Radius */
    --r-1: 6px; --r-2: 8px; --r-3: 12px;

    /* Z-Index */
    --z-header: 100; --z-overlay: 1000; --z-toast: 1200;

    /* Motion */
    --t-fast: 150ms; --t-mid: 250ms;
    --ease-standard: cubic-bezier(0.4, 0, 0.2, 1);
}

[data-theme="light"] {
    --c-surface-0: #F9F9F9;
    --c-surface-1: #FFFFFF;
    --c-surface-2: #F0F2F4;
    --c-text-1: #111314;
    --c-text-2: #5F656B;
    --c-border: #E1E3E4;
    --c-accent: #087CB8; /* Blue */
    --c-accent-visited: #6D28D9; /* Purple */
    --c-success: #15803D;
    --c-warn: #B45309;
    --c-danger: #B91C1C;
    --c-overlay-backdrop: rgba(17, 19, 20, 0.6);
}

/* 3. BASE & DOCUMENT STYLES */
html {
    scroll-behavior: smooth;
    scroll-padding-top: 100px;
}
body {
    background-color: var(--c-surface-0);
    color: var(--c-text-1);
    font-family: var(--font-body);
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    transition: background-color var(--t-mid) var(--ease-standard), color var(--t-mid) var(--ease-standard);
}

/* Reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
    html { scroll-behavior: auto; }
    *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
}

/* 4. LAYOUT SYSTEMS */
.container {
    width: 100%;
    max-width: 1280px;
    margin-left: auto;
    margin-right: auto;
    padding-left: var(--space-4);
    padding-right: var(--space-4);
}

.l-grid--with-aside {
    display: grid;
    grid-template-columns: minmax(0, 1fr);
    gap: var(--space-7);
}

/* 5. TYPOGRAPHY */
h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-ui);
    font-weight: 700;
    line-height: 1.2;
    letter-spacing: -0.5px;
    text-wrap: balance;
}
h1 { font-size: 38px; }
h2 { font-size: 28px; margin-top: var(--space-7); margin-bottom: var(--space-4); }
h3 { font-size: 22px; font-weight: 600; margin-top: var(--space-6); margin-bottom: var(--space-4); }
p { max-width: 70ch; }
a {
    color: var(--c-accent);
    text-decoration: none;
    transition: color var(--t-fast) var(--ease-standard), text-decoration-color var(--t-fast) var(--ease-standard);
}
a:visited { color: var(--c-accent-visited); }
a:hover, a:focus-visible {
    color: var(--c-accent); /* keep color consistent on hover */
    text-decoration: underline;
    text-decoration-thickness: 1.5px;
}
*:focus-visible {
    outline: 2px solid var(--c-accent);
    outline-offset: 2px;
    border-radius: var(--r-1);
}
blockquote {
    border-left: 3px solid var(--c-border);
    padding-left: var(--space-4);
    margin: var(--space-5) 0;
    font-style: italic;
    color: var(--c-text-2);
}
blockquote footer { font-style: normal; margin-top: var(--space-2); font-size: 14px; }
figure { margin: var(--space-6) 0; }
figcaption { font-size: 14px; color: var(--c-text-2); text-align: center; margin-top: var(--space-2); }


/* 6. COMPONENT STYLES */

/* Skip Link */
.skip-link {
    position: absolute;
    top: -100px;
    left: 1rem;
    background: var(--c-surface-2);
    color: var(--c-text-1);
    padding: var(--space-3) var(--space-4);
    z-index: 9999;
    transition: top 0.3s;
}
.skip-link:focus { top: 1rem; }

/* Header */
.c-header {
    position: sticky;
    top: 0;
    z-index: var(--z-header);
    background-color: var(--c-surface-0);
    border-bottom: 1px solid var(--c-border);
    padding: var(--space-4) 0;
    transition: padding var(--t-mid) ease;
}
.c-header__container { display: flex; justify-content: space-between; align-items: center; }
.c-header__logo { font-family: var(--font-ui); font-weight: 700; font-size: 20px; text-decoration: none; color: var(--c-text-1); }
.c-header__nav { display: none; } /* Hidden on mobile by default */
.c-header__nav a { color: var(--c-text-2); font-family: var(--font-ui); font-size: 15px; }
.c-header__nav a:hover, .c-header__nav a:focus-visible { color: var(--c-text-1); }
.c-icon-button {
    background: none;
    border: none;
    color: var(--c-text-2);
    cursor: pointer;
    width: 32px;
    height: 32px;
    display: grid;
    place-items: center;
}
.c-icon-button:hover, .c-icon-button:focus-visible { color: var(--c-text-1); }

/* Theme Toggle Icon */
#theme-toggle::before {
    content: '☀️';
    font-size: 20px;
}
[data-theme="dark"] #theme-toggle::before {
    content: '🌙';
}

/* Article Layout & Typography */
.c-article { padding: var(--space-6) 0; }
.c-article__header {
    max-width: 720px;
    margin: 0 auto var(--space-7);
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-4);
}
.c-article__eyebrow { display: flex; align-items: center; gap: var(--space-2); font-family: var(--font-ui); font-size: 14px; color: var(--c-text-2); }
.c-article__title { font-size: 40px; margin: 0; }
.c-article__dek { font-family: var(--font-ui); font-size: 20px; color: var(--c-text-2); max-width: 65ch; }
.c-article__byline { color: var(--c-text-2); font-size: 14px; display: flex; gap: var(--space-2); }
.c-article__hero-media { max-width: 1100px; margin: 0 auto; position: relative; }
.c-article__hero-media img { display: block; width: 100%; height: auto; border-radius: var(--r-2); aspect-ratio: 3 / 2; object-fit: cover; }
.c-article__body { max-width: 720px; margin: var(--space-7) auto 0; }
.c-article__body > * + * { margin-top: var(--space-5); }
.c-article__body > h2 + *, .c-article__body > h3 + * { margin-top: var(--space-4); }
.c-article__footer { max-width: 720px; margin: var(--space-8) auto 0; }

/* Badge */
.c-badge {
    display: inline-flex;
    align-items: center;
    gap: var(--space-1);
    padding: var(--space-1) var(--space-2);
    border-radius: 99px; /* capsule */
    font-size: 12px;
    font-family: var(--font-ui);
    font-weight: 600;
    text-transform: uppercase;
}
.c-badge--verified { background-color: var(--c-success); color: var(--c-surface-0); }
.c-badge--developing { background-color: var(--c-warn); color: var(--c-surface-0); }
.c-badge--unverified { background-color: var(--c-text-2); color: var(--c-surface-0); }

/* Chip */
.c-chip {
    display: inline-block;
    padding: var(--space-1) var(--space-3);
    border: 1px solid var(--c-border);
    border-radius: var(--r-1);
    font-family: var(--font-ui);
    font-size: 13px;
    color: var(--c-text-2);
    text-decoration: none;
    transition: background-color var(--t-fast) ease, border-color var(--t-fast) ease;
}
.c-chip:hover, .c-chip:focus-visible {
    background-color: var(--c-surface-2);
    border-color: var(--c-accent);
    color: var(--c-text-1);
    text-decoration: none;
}

/* Callout */
.c-callout {
    display: flex;
    gap: var(--space-3);
    background-color: var(--c-surface-2);
    padding: var(--space-4);
    border-radius: var(--r-2);
    border-left: 3px solid;
}
.c-callout--note { border-color: var(--c-accent); }
.c-callout--warn { border-color: var(--c-warn); }
.c-callout__icon { font-size: 20px; line-height: 1; }
.c-callout__content { flex: 1; }
.c-callout__content > *:first-child { margin-top: 0; }
.c-callout__content > *:last-child { margin-bottom: 0; }

/* Card (for related posts, etc.) */
.c-card {
    display: block;
    background-color: var(--c-surface-1);
    border: 1px solid var(--c-border);
    padding: var(--space-4);
    border-radius: var(--r-2);
    text-decoration: none;
    color: var(--c-text-1);
    transition: border-color var(--t-mid) ease, transform var(--t-mid) ease;
}
.c-card:hover, .c-card:focus-visible {
    border-color: var(--c-accent);
    transform: translateY(-2px);
    text-decoration: none;
}
.c-card__title { font-size: 18px; font-weight: 600; margin-bottom: var(--space-2); color: var(--c-text-1); }
.c-card__dek { font-size: 15px; color: var(--c-text-2); line-height: 1.4; margin-bottom: var(--space-3); }
.c-card__meta { display: flex; justify-content: space-between; align-items: center; font-size: 13px; color: var(--c-text-2); }

/* Related Posts */
.c-related-posts { margin-top: var(--space-8); }
.c-related-posts__grid {
    display: grid;
    gap: var(--space-4);
}

/* Sources Box */
.c-sources-box {
    background-color: var(--c-surface-1);
    padding: var(--space-5);
    border-radius: var(--r-2);
    border: 1px solid var(--c-border);
}
.c-sources-box ul { list-style: none; padding-left: 0; }
.c-sources-box li + li { margin-top: var(--space-2); }
.c-sources-box .disclaimer { font-size: 13px; color: var(--c-text-2); margin-top: var(--space-4); max-width: none; }

/* Aside / TOC */
.c-aside { display: none; } /* Hidden on mobile */
.c-toc {
    position: sticky;
    top: 100px;
    padding-left: var(--space-5);
    border-left: 1px solid var(--c-border);
}
.c-toc h3 { font-size: 16px; margin: 0 0 var(--space-3) 0; color: var(--c-text-2); }
.c-toc ol { list-style: none; padding-left: 0; }
.c-toc li + li { margin-top: var(--space-2); }
.c-toc a {
    font-family: var(--font-ui);
    font-size: 14px;
    color: var(--c-text-2);
    display: block;
}
.c-toc a:hover { color: var(--c-text-1); }
.c-toc a.is-active {
    color: var(--c-accent);
    font-weight: 600;
}

/* Sensitive Content Overlay */
.c-sensitive-overlay {
    position: absolute;
    inset: 0;
    display: grid;
    place-items: center;
    background-color: var(--c-overlay-backdrop);
    backdrop-filter: blur(16px);
    border-radius: var(--r-2);
    opacity: 1;
    transition: opacity var(--t-mid) ease, visibility var(--t-mid) ease;
}
.c-sensitive-overlay.is-hidden { opacity: 0; visibility: hidden; }
.c-sensitive-overlay__content { text-align: center; }
.c-sensitive-overlay__content p { font-family: var(--font-ui); font-weight: 600; margin-bottom: var(--space-3); }
.c-button {
    background-color: var(--c-surface-1);
    border: 1px solid var(--c-border);
    color: var(--c-text-1);
    font-family: var(--font-ui);
    padding: var(--space-2) var(--space-4);
    border-radius: var(--r-1);
    cursor: pointer;
}

/* Footer */
.c-footer {
    border-top: 1px solid var(--c-border);
    margin-top: var(--space-8);
    padding: var(--space-6) 0;
    color: var(--c-text-2);
    font-family: var(--font-ui);
    font-size: 14px;
}
.c-footer__container {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-4);
    text-align: center;
}
.c-footer__links { display: flex; flex-wrap: wrap; justify-content: center; gap: var(--space-4); }
.c-footer__links a { color: var(--c-text-2); }
.c-footer__links a:hover { color: var(--c-text-1); }

/* 7. UTILITY CLASSES */
.c-toast {
    position: fixed;
    bottom: -100px; /* Initially hidden */
    left: 50%;
    transform: translateX(-50%);
    background-color: var(--c-surface-2);
    color: var(--c-text-1);
    padding: var(--space-3) var(--space-5);
    border-radius: var(--r-1);
    font-family: var(--font-ui);
    font-size: 15px;
    z-index: var(--z-toast);
    transition: bottom 0.5s var(--ease-standard);
}
.c-toast.is-visible { bottom: var(--space-5); }


/* 8. RESPONSIVE STYLES */

/* Medium screens (tablets) */
@media (min-width: 768px) {
    .c-header__nav { display: flex; gap: var(--space-5); }
    .c-related-posts__grid { grid-template-columns: 1fr 1fr; }
    .c-footer__container { flex-direction: row; justify-content: space-between; }
}

/* Large screens (desktops) */
@media (min-width: 1024px) {
    .l-grid--with-aside {
        grid-template-columns: minmax(0, 3fr) 1fr;
    }
    .c-aside { display: block; }
}